{
  "title": "MongoDB Atlas - Database, Collection, and Query Overview",
  "description": "This dashboard provides an overview of the performance of your MongoDB Atlas databases on a database, collection and query level so you can identify and troubleshoot performance issues in one place. \n\nFor further reading on monitoring MongoDB Atlas:\n\n- [How to monitor MongoDB Atlas with Datadog](https://www.datadoghq.com/blog/monitor-atlas-performance-metrics-with-datadog/)\n\n- [How to monitor MongoDB Atlas for Government with Datadog](https://www.datadoghq.com/blog/monitor-mongodb-atlas-for-government-datadog/)\n\n- [Datadog's MongoDB Atlas integration docs](https://docs.datadoghq.com/integrations/mongodb_atlas/#overview). ",
  "widgets": [
    {
      "id": 7480463324232016,
      "definition": {
        "title": "Database Stats (dbStats)",
        "background_color": "vivid_green",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 1906095404858910,
            "definition": {
              "title": "# of collections",
              "title_size": "16",
              "title_align": "left",
              "time": {},
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "aggregator": "avg",
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:mongodb.atlas.dbstats.collections{$organizationname,$projectname,$clustername,$databasename,$hostnameport,$host,$processstate}"
                    }
                  ],
                  "response_format": "scalar"
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 3
            }
          },
          {
            "id": 3604488985938846,
            "definition": {
              "title": "avg object size",
              "title_size": "16",
              "title_align": "left",
              "time": {},
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte"
                        }
                      },
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "aggregator": "avg",
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:mongodb.atlas.dbstats.avg.object.size{$organizationname,$projectname,$clustername,$databasename,$hostnameport,$host,$processstate}"
                    }
                  ],
                  "response_format": "scalar"
                }
              ],
              "autoscale": true,
              "precision": 2
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 3
            }
          },
          {
            "id": 8687938053301306,
            "definition": {
              "title": "avg index size",
              "title_size": "16",
              "title_align": "left",
              "time": {},
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte"
                        }
                      },
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "aggregator": "avg",
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:mongodb.atlas.dbstats.index.size{$organizationname,$projectname,$clustername,$databasename,$hostnameport,$host,$processstate}"
                    }
                  ],
                  "response_format": "scalar"
                }
              ],
              "autoscale": true,
              "precision": 2
            },
            "layout": {
              "x": 8,
              "y": 0,
              "width": 4,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 12,
        "height": 4
      }
    },
    {
      "id": 7805862455900080,
      "definition": {
        "title": "Collection Stats ($collStats - latencyStats)",
        "background_color": "vivid_green",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 5846352545448276,
            "definition": {
              "title": "number of read operations at p50, p95 and p99",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "time": {},
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "p50 reads",
                      "formula": "query1"
                    },
                    {
                      "alias": "p95 reads",
                      "formula": "query2"
                    },
                    {
                      "alias": "p99 reads",
                      "formula": "query3"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:mongodb.atlas.latencyStats.reads.p50{$organizationname,$projectname,$collstats.shardedclustername,$collstats.replicasetname,$databasename,$collectionname,$hostnameport,$processstate,$collstats.namespacehoststate}.as_count()"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "avg:mongodb.atlas.latencyStats.reads.p95{$organizationname,$projectname,$collstats.shardedclustername,$collstats.replicasetname,$databasename,$collectionname,$hostnameport,$processstate,$collstats.namespacehoststate}.as_count()"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "avg:mongodb.atlas.latencyStats.reads.p99{$organizationname,$projectname,$collstats.shardedclustername,$collstats.replicasetname,$databasename,$collectionname,$hostnameport,$processstate,$collstats.namespacehoststate}.as_count()"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "order_by": "values",
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 5
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 4,
        "width": 12,
        "height": 6
      }
    },
    {
      "id": 7792995721565907,
      "definition": {
        "title": "Query Stats ($queryStats)",
        "background_color": "vivid_green",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 3500054709186122,
            "definition": {
              "title": "Docs and Keys Examined Ratios",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:mongodb.atlas.querystats.docs_examined_ratio{$organizationname,$orgid,$projectname,$projectid,$clustername,$databasename,$collectionname,$host,$port,$querystats.processtype,$querystats.queryshapehash,$querystats.keyhash,$querystats.command}"
                    },
                    {
                      "name": "query2",
                      "data_source": "metrics",
                      "query": "avg:mongodb.atlas.querystats.keys_examined_ratio{$organizationname,$orgid,$projectname,$projectid,$clustername,$databasename,$collectionname,$host,$port,$querystats.processtype,$querystats.queryshapehash,$querystats.keyhash,$querystats.command}"
                    }
                  ],
                  "formulas": [
                    {
                      "alias": "Docs Examined Ratio",
                      "formula": "query1"
                    },
                    {
                      "alias": "Keys Examined Ratio",
                      "formula": "query2"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 3
            }
          },
          {
            "id": 2152738510544621,
            "definition": {
              "title": "Docs Examined, Keys Examined, Docs Returned",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:mongodb.atlas.querystats.docs_examined_sum_total{$organizationname,$orgid,$projectname,$projectid,$clustername,$databasename,$collectionname,$host,$port,$querystats.processtype,$querystats.queryshapehash,$querystats.keyhash,$querystats.command}.as_count()"
                    },
                    {
                      "name": "query2",
                      "data_source": "metrics",
                      "query": "avg:mongodb.atlas.querystats.keys_examined_sum_total{$organizationname,$orgid,$projectname,$projectid,$clustername,$databasename,$collectionname,$host,$port,$querystats.processtype,$querystats.queryshapehash,$querystats.keyhash,$querystats.command}.as_count()"
                    },
                    {
                      "name": "query3",
                      "data_source": "metrics",
                      "query": "avg:mongodb.atlas.querystats.docs_returned_sum_total{$organizationname,$orgid,$projectname,$projectid,$clustername,$databasename,$collectionname,$host,$port,$querystats.processtype,$querystats.queryshapehash,$querystats.keyhash,$querystats.command}.as_count()"
                    }
                  ],
                  "formulas": [
                    {
                      "alias": "Docs Examined",
                      "formula": "query1"
                    },
                    {
                      "alias": "Keys Examined",
                      "formula": "query2"
                    },
                    {
                      "alias": "Docs Returned",
                      "formula": "query3"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 12,
              "height": 3
            }
          },
          {
            "id": 4156492486157840,
            "definition": {
              "title": "Last Exec Micros",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:mongodb.atlas.querystats.last_exec_micros{$organizationname,$orgid,$projectname,$projectid,$clustername,$databasename,$collectionname,$host,$port,$querystats.processtype,$querystats.queryshapehash,$querystats.keyhash,$querystats.command}"
                    }
                  ],
                  "formulas": [
                    {
                      "alias": "last_exec_micros",
                      "formula": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 6,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 2321992197303111,
            "definition": {
              "title": "Working Millis",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:mongodb.atlas.querystats.working_millis_sum_total{$organizationname,$orgid,$projectname,$projectid,$clustername,$databasename,$collectionname,$host,$port,$querystats.processtype,$querystats.queryshapehash,$querystats.keyhash,$querystats.command}.as_count()"
                    }
                  ],
                  "formulas": [
                    {
                      "alias": "working_millis_sum_total",
                      "formula": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 4,
              "y": 6,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 6004550866184800,
            "definition": {
              "title": "Total Time To Response",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:mongodb.atlas.querystats.time_to_response_micros_sum_total{$organizationname,$orgid,$projectname,$projectid,$clustername,$databasename,$collectionname,$host,$port,$querystats.processtype,$querystats.queryshapehash,$querystats.keyhash,$querystats.command}.as_count()"
                    }
                  ],
                  "formulas": [
                    {
                      "alias": "time_to_response_micros_sum_total",
                      "formula": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 8,
              "y": 6,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 5100791726329695,
            "definition": {
              "title": "Exec Count",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:mongodb.atlas.querystats.exec_count_total{$organizationname,$orgid,$projectname,$projectid,$clustername,$databasename,$collectionname,$host,$port,$querystats.processtype,$querystats.queryshapehash,$querystats.keyhash,$querystats.command}.as_count()"
                    }
                  ],
                  "formulas": [
                    {
                      "alias": "exec_count_total",
                      "formula": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 8,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 1485550873365268,
            "definition": {
              "title": "Bytes Read",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:mongodb.atlas.querystats.bytes_read_sum_total{$organizationname,$orgid,$projectname,$projectid,$clustername,$databasename,$collectionname,$host,$port,$querystats.processtype,$querystats.queryshapehash,$querystats.keyhash,$querystats.command}.as_count()"
                    }
                  ],
                  "formulas": [
                    {
                      "alias": "bytes_read_sum_total",
                      "formula": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 6,
              "y": 8,
              "width": 6,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 12,
        "height": 11,
        "is_column_break": true
      }
    }
  ],
  "template_variables": [
    {
      "name": "organizationname",
      "prefix": "organizationname",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "orgid",
      "prefix": "orgid",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "projectname",
      "prefix": "projectname",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "projectid",
      "prefix": "projectid",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "clustername",
      "prefix": "clustername",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "databasename",
      "prefix": "databasename",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "collectionname",
      "prefix": "collectionname",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "hostnameport",
      "prefix": "hostnameport",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "host",
      "prefix": "host",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "port",
      "prefix": "port",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "processstate",
      "prefix": "processstate",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "collstats.shardedclustername",
      "prefix": "shardedclustername",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "collstats.replicasetname",
      "prefix": "replicasetname",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "collstats.namespacehoststate",
      "prefix": "namespacehoststate",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "querystats.processtype",
      "prefix": "processtype",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "querystats.queryshapehash",
      "prefix": "queryshapehash",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "querystats.keyhash",
      "prefix": "keyhash",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "querystats.command",
      "prefix": "command",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "notify_list": [],
  "reflow_type": "fixed"
}