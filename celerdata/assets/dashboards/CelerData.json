{"title":"CelerData","description":"This CelerData Dashboard provides an overview of components, query statistics and transactions.","widgets":[{"id":1957608469562370,"definition":{"title":"About <integration>","banner_img":"https://celerdata.com/hubfs/celerdata.svg","show_title":false,"type":"group","layout_type":"ordered","widgets":[{"id":6490166083690563,"definition":{"type":"note","content":"This dashboard provides three aspects of the CelerData database:\n\n1. A basic overview of components, including FE, BE, CN.\n2. Query statistics, including query QPS, query latency and query error rate.\n3. Transaction statistics, including the transaction rate at every stage.\n","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true}},{"id":1209503309180601,"definition":{"type":"note","content":"There are 600+ metrics collected, and the dashboard is designed to be a starting point for monitoring the CelerData database.\nYou can see how to catalog the metrics in the [metrics documentation](https://docs.starrocks.io/docs/administration/management/monitoring/metrics/).\n","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":false}}]}},{"id":436478032959804,"definition":{"title":"Overview","background_color":"vivid_green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":276215501768058,"definition":{"title":"FE Number","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.fe.job{$host, $endpoint} by {endpoint,host}","aggregator":"sum"}],"formulas":[{"formula":"count_not_null(query1)"}]}],"autoscale":true,"precision":2}},{"id":1834078831472472,"definition":{"title":"Cluster FE JVM Heap Stat","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"percent"}},"formula":"100 * (query1 / query2)"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:celerdata.fe.jvm.heap_size_bytes{type:used, $host, $endpoint}"},{"name":"query2","data_source":"metrics","query":"avg:celerdata.fe.jvm.heap_size_bytes{type:max, $host, $endpoint}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":8912805107858856,"definition":{"title":"BDBJE Write Latency - 99th","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"millisecond"}},"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:celerdata.fe.editlog_write_latency_ms.quantile{$endpoint, $host, quantile:0.99}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false}}},{"id":5957884915044816,"definition":{"title":"JVM Non Heap","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:celerdata.fe.jvm.non_heap_size_bytes{$host, $endpoint}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":746395472380460,"definition":{"title":"BE Number","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.be.cpu.count{service:be, $host, $endpoint} by {endpoint,host}.as_count()","aggregator":"avg"}],"formulas":[{"formula":"count_not_null(query1)"}]}],"autoscale":true,"precision":2}},{"id":2852157928420152,"definition":{"title":"BE CPU Idle","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"percent"}},"formula":"100 * (query1 / query2)"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.be.cpu.count{mode:idle, $host, $endpoint, service:be}.as_count()"},{"name":"query2","data_source":"metrics","query":"sum:celerdata.be.cpu.count{$host, $endpoint, service:be}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":7186093460401540,"definition":{"title":"BE Mem Stat","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:celerdata.be.process_mem_bytes{service:be, $host, $endpoint}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":4410829798222094,"definition":{"title":"BE Used/Total Capacity","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Used Capacity","formula":"query1"},{"alias":"Total Capacity","formula":"query2"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:celerdata.be.disks_data_used_capacity{$host, $endpoint, service:be}"},{"name":"query2","data_source":"metrics","query":"avg:celerdata.be.disks_total_capacity{$host, $endpoint, service:be}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":5146649244521750,"definition":{"title":"CN Number","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.be.cpu.count{service:cn} by {endpoint,host}.as_count()","aggregator":"avg"}],"formulas":[{"formula":"count_not_null(query1)"}]}],"autoscale":true,"precision":2}},{"id":8337527662249270,"definition":{"title":"CN CPU Idle","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"percent"}},"formula":"100 * (query1 / query2)"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.be.cpu.count{mode:idle,$host,$endpoint,service:be}.as_count()"},{"name":"query2","data_source":"metrics","query":"sum:celerdata.be.cpu.count{$host,$endpoint,service:be}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":4472384810024688,"definition":{"title":"CN Mem Stat","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:celerdata.be.process_mem_bytes{$host, $endpoint, service:cn}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":8245136682489894,"definition":{"title":"CN Used/Total Capacity","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:celerdata.be.disks_data_used_capacity{$host,$endpoint,service:cn}"},{"name":"query2","data_source":"metrics","query":"avg:celerdata.be.disks_total_capacity{$host,$endpoint,service:cn}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}}]}},{"id":3904359039630442,"definition":{"title":"Query Statistic","background_color":"yellow","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5129314341985200,"definition":{"title":"Cluster QPS Stat","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"per_second(query1)"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.fe.query.count{$host, $endpoint}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":7273765173109034,"definition":{"title":"FE Connections","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.fe.connection_total{$host, $endpoint}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":890292612033280,"definition":{"title":"FE Query Latency - 99th","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"millisecond"}},"formula":"per_second(query1)"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:celerdata.fe.query_latency_ms.quantile{$host, $endpoint, quantile:0.99} by {endpoint}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":2867856506487470,"definition":{"title":"Query Error Rate","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"100 * per_second(query1)","number_format":{"unit":{"type":"canonical_unit","unit_name":"percent"}}}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.fe.query.err.count{$host, $endpoint}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}}]}},{"id":6692347238633260,"definition":{"title":"Transaction","background_color":"vivid_purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5968448980262968,"definition":{"title":" Txn Begin/Success Rate On FE","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["min","max","avg","value"],"type":"timeseries","requests":[{"formulas":[{"alias":"begin","formula":"per_second(query1)","number_format":{"unit":{"type":"custom_unit_label","label":"ops/s"}}},{"alias":"success","formula":"per_second(query2)","number_format":{"unit":{"type":"custom_unit_label","label":"ops/s"}}}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.fe.txn.begin.count{$host, $endpoint}.as_rate()"},{"name":"query2","data_source":"metrics","query":"sum:celerdata.fe.txn.success.count{$host, $endpoint}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":8865946106765740,"definition":{"title":"Txn Failed/Reject Rate On FE","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value"],"type":"timeseries","requests":[{"formulas":[{"alias":"reject","formula":"per_second(query1)","number_format":{"unit":{"type":"custom_unit_label","label":"ops/s"}}},{"alias":"failed","formula":"per_second(query2)","number_format":{"unit":{"type":"custom_unit_label","label":"ops/s"}}}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.fe.txn.reject.count{$host, $endpoint}.as_rate()"},{"name":"query2","data_source":"metrics","query":"sum:celerdata.fe.txn.failed.count{$host, $endpoint}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":150641777262426,"definition":{"title":"Txn Requset Rate on BE/CN","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"being","formula":"per_second(query1)","number_format":{"unit":{"type":"custom_unit_label","label":"ops/s"}}},{"alias":"exec","formula":"per_second(query2)","number_format":{"unit":{"type":"custom_unit_label","label":"ops/s"}}},{"alias":"commit","formula":"per_second(query3)","number_format":{"unit":{"type":"custom_unit_label","label":"ops/s"}}},{"alias":"rollback","formula":"per_second(query4)","number_format":{"unit":{"type":"custom_unit_label","label":"ops/s"}}}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:celerdata.be.txn.request.count{$host, $endpoint, type:begin}.as_rate()"},{"name":"query2","data_source":"metrics","query":"sum:celerdata.be.txn.request.count{$host, $endpoint, type:exec}.as_rate()"},{"name":"query3","data_source":"metrics","query":"sum:celerdata.be.txn.request.count{$host, $endpoint, type:commit}.as_rate()"},{"name":"query4","data_source":"metrics","query":"sum:celerdata.be.txn.request.count{$host, $endpoint, type:rollback}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":8605514229012284,"definition":{"title":"Publish Tasks on BE/CN","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"total","formula":"query1","number_format":{"unit":{"type":"custom_unit_label","label":"ops/s"}}},{"alias":"failed","formula":"query2","number_format":{"unit":{"type":"custom_unit_label","label":"ops/s"}}}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:celerdata.be.engine_requests.count{$host, $endpoint, status:total, type:publish}.as_count()"},{"name":"query2","data_source":"metrics","query":"avg:celerdata.be.engine_requests.count{$host, $endpoint, status:failed, type:publish}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}}]}}],"template_variables":[{"name":"host","prefix":"host","available_values":[],"default":"*"},{"name":"endpoint","prefix":"endpoint","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"auto"}
