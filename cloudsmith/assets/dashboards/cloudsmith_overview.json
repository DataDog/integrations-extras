{"title":"Cloudsmith Overview","description":"Cloudsmith integration: quota %, 7d trends, tokens, realtime bandwidth, audit & vulnerabilities.","widgets":[{"id":1,"definition":{"type":"image","url":"https://avatars.githubusercontent.com/u/7657912","sizing":"contain"},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":2,"definition":{"type":"note","content":"### Cloudsmith Integration Overview\n\nThis integration collects and reports key operational and security metrics from your Cloudsmith organization:\n\n- **Quota Usage**: Current percentage of storage and bandwidth consumed (`cloudsmith.storage_used`, `cloudsmith.bandwidth_used`), with service checks reflecting OK/WARN/CRITICAL thresholds.\n- **7â€‘Day Trends**: Historical storage and bandwidth percentages for capacity planning.\n- **Entitlement Tokens**: Total token count plus cumulative token download and bandwidth usage (`cloudsmith.token_count`, `cloudsmith.token_download_total`, `cloudsmith.token_bandwidth_total`).\n- **Realtime Bandwidth**: Per-minute downloaded bytes interval (`cloudsmith.bandwidth_bytes_interval`) for near real-time traffic visibility.\n- **Audit Logs**: Emits Datadog events for user actions (login and other namespace events) to track access and changes.\n- **Vulnerabilities**: Emits events for packages with High/Critical vulnerabilities, including severity, counts, and package metadata.\n\nUse the template variable `cloudsmith_org` to scope metrics to a specific organization. All custom metrics are namespaced under `cloudsmith.*`.\n\n\n**Further Reading:**\n\n-   [Cloudsmith Documentation](https://help.cloudsmith.io/docs/welcome-to-cloudsmith-docs)\n-   [Datadog Integration on Cloudsmith](https://help.cloudsmith.io/docs/datadog)","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"has_padding":true},"layout":{"x":4,"y":0,"width":8,"height":2}},{"id":10,"definition":{"title":"Current Quota %","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":11,"definition":{"title":"Storage % Used","time":{"type":"live","unit":"day","value":1},"type":"query_value","requests":[{"queries":[{"query":"avg:cloudsmith.storage_used{cloudsmith_org:$cloudsmith_org.value}","data_source":"metrics","name":"q"}],"formulas":[{"formula":"q"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":12,"definition":{"title":"Bandwidth % Used","time":{"type":"live","unit":"day","value":1},"type":"query_value","requests":[{"queries":[{"query":"avg:cloudsmith.bandwidth_used{cloudsmith_org:$cloudsmith_org.value}","data_source":"metrics","name":"q"}],"formulas":[{"formula":"q"}],"response_format":"scalar"}],"autoscale":true,"precision":2},"layout":{"x":3,"y":0,"width":3,"height":2}}]},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":20,"definition":{"title":"Quota 7d Bars","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":21,"definition":{"title":"Storage % (7d)","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"time":{"type":"live","unit":"week","value":1},"type":"timeseries","requests":[{"queries":[{"query":"avg:cloudsmith.storage_used{cloudsmith_org:$cloudsmith_org.value}","data_source":"metrics","name":"q"}],"response_format":"timeseries","style":{"palette":"semantic","order_by":"tags","order_reverse":false,"line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"Percent"}},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":22,"definition":{"title":"Bandwidth % (7d)","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"type":"live","unit":"week","value":1},"type":"timeseries","requests":[{"queries":[{"query":"avg:cloudsmith.bandwidth_used{cloudsmith_org:$cloudsmith_org.value}","data_source":"metrics","name":"q"}],"response_format":"timeseries","display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"Percent"}},"layout":{"x":3,"y":0,"width":3,"height":2}}]},"layout":{"x":6,"y":0,"width":6,"height":3}},{"id":40,"definition":{"title":"Realtime Bandwidth (24h)","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":41,"definition":{"title":"Interval Bytes (current)","time":{"type":"live","unit":"minute","value":5},"type":"query_value","requests":[{"queries":[{"query":"avg:cloudsmith.bandwidth_bytes_interval{cloudsmith_org:$cloudsmith_org.value}","data_source":"metrics","name":"q"}],"formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"byte_in_decimal_bytes_family"}},"formula":"q"}],"response_format":"scalar"}],"autoscale":true,"precision":0},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":42,"definition":{"title":"Interval Bytes Trend","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"type":"live","unit":"day","value":1},"type":"timeseries","requests":[{"queries":[{"query":"sum:cloudsmith.bandwidth_bytes_interval{cloudsmith_org:$cloudsmith_org.value}","data_source":"metrics","name":"q"}],"response_format":"timeseries","formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"byte_in_decimal_bytes_family"}},"formula":"q"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"Bytes"}},"layout":{"x":3,"y":0,"width":9,"height":2}}]},"layout":{"x":0,"y":5,"width":12,"height":3}},{"id":30,"definition":{"title":"Entitlement Tokens","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":31,"definition":{"title":"Token Count","type":"query_value","requests":[{"queries":[{"query":"avg:cloudsmith.token_count{cloudsmith_org:$cloudsmith_org.value}","data_source":"metrics","name":"q"}],"formulas":[{"number_format":{"unit":{"type":"custom_unit_label","label":"tokens"}},"formula":"q"}],"response_format":"scalar"}],"autoscale":false,"precision":0},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":32,"definition":{"title":"Token Downloads (trend)","type":"query_value","requests":[{"formulas":[{"formula":"q","number_format":{"unit":{"type":"canonical_unit","unit_name":"byte_in_decimal_bytes_family"}}}],"queries":[{"query":"avg:cloudsmith.token_download_total{cloudsmith_org:$cloudsmith_org.value}","data_source":"metrics","name":"q","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"layout":{"x":2,"y":0,"width":5,"height":2}},{"id":33,"definition":{"title":"Token Bandwidth (bytes)","type":"query_value","requests":[{"formulas":[{"formula":"q","number_format":{"unit":{"type":"canonical_unit","unit_name":"byte_in_decimal_bytes_family"}}}],"queries":[{"query":"avg:cloudsmith.token_bandwidth_total{cloudsmith_org:$cloudsmith_org.value}","data_source":"metrics","name":"q","aggregator":"avg"}],"response_format":"scalar"}],"autoscale":true,"precision":2,"timeseries_background":{"type":"area"}},"layout":{"x":7,"y":0,"width":5,"height":2}}]},"layout":{"x":0,"y":8,"width":12,"height":3}},{"id":50,"definition":{"title":"Audit Logs","time":{"type":"live","unit":"hour","value":1},"requests":[{"response_format":"event_list","query":{"query_string":"source:cloudsmith @aggregation_key:audit_log","data_source":"event_stream","event_size":"l","indexes":["*"]},"columns":[]}],"type":"list_stream"},"layout":{"x":0,"y":0,"width":12,"height":4}},{"id":60,"definition":{"title":"Vulnerabilities","time":{"type":"live","unit":"hour","value":1},"requests":[{"response_format":"event_list","columns":[],"query":{"data_source":"event_stream","query_string":"source:cloudsmith @aggregation_key:vulnerabilities","event_size":"l"}}],"type":"list_stream"},"layout":{"x":0,"y":4,"width":12,"height":4}}],"template_variables":[{"name":"cloudsmith_org","prefix":"cloudsmith_org","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}