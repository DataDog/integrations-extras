- name: random-pass-or-fail
  uuid: 13fb8e14-2263-4726-a4c0-b7268471062a
  description: ''
  executionEnabled: true
  loglevel: INFO
  multipleExecutions: true
  schedule:
    month: '*'
    time:
      hour: '*'
      minute: '*'
      seconds: '0'
    weekday:
      day: '*'
    year: '*'
  scheduleEnabled: true
  sequence:
    keepgoing: false
    strategy: node-first
    commands:
    - script: |-
        #!/bin/bash
        SLEEP_TIME=$(( (RANDOM % 61) + 80 ))
        echo "Sleeping for ${SLEEP_TIME} seconds..."
        sleep $SLEEP_TIME

        # Fail if the number is 20 or less (20% chance)
        if [ $(( $RANDOM % 100 + 1 )) -le 20 ]; then
            echo "Random failure triggered!" >&2
            exit 1
        fi

        echo "Task completed successfully."
        exit 0
