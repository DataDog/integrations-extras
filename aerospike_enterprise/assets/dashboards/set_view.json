{
  "title": "Aerospike Enterprise - Set View",
  "description": "Visualizes set-level metrics such as stop-writes, quotas, data utilization, and more.",
  "widgets": [
    {
      "id": 5817324061300921,
      "definition": {
        "type": "image",
        "url": "/static/images/logos/aerospike_small.svg",
        "sizing": "cover",
        "margin": "md",
        "has_background": true,
        "has_border": true,
        "vertical_align": "center",
        "horizontal_align": "center"
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 4,
        "height": 2
      }
    },
    {
      "id": 3377466337507246,
      "definition": {
        "title": "Overview",
        "background_color": "vivid_blue",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 1055143943355278,
            "definition": {
              "title": "Aerospike Version",
              "type": "treemap",
              "requests": [
                {
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:aerospike.server.node.up{$aerospike_cluster,$aerospike_service} by {build}",
                      "aggregator": "last"
                    }
                  ],
                  "response_format": "scalar",
                  "style": {
                    "palette": "datadog16"
                  },
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 2,
              "height": 2
            }
          },
          {
            "id": 8065167565040954,
            "definition": {
              "title": "Stop Writes",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "max:aerospike.server.sets.stop_writes_size{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": "=",
                      "value": 0,
                      "palette": "white_on_green"
                    },
                    {
                      "comparator": ">=",
                      "value": 1,
                      "palette": "white_on_red"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "area",
                "yaxis": {
                  "include_zero": true
                }
              }
            },
            "layout": {
              "x": 2,
              "y": 0,
              "width": 3,
              "height": 1
            }
          },
          {
            "id": 2876697179464776,
            "definition": {
              "title": "Stop Writes Count (Unique values)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "max:aerospike.server.sets.stop_writes_count{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": "=",
                      "value": 0,
                      "palette": "white_on_green"
                    },
                    {
                      "comparator": ">=",
                      "value": 1,
                      "palette": "white_on_red"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "area",
                "yaxis": {
                  "include_zero": true
                }
              }
            },
            "layout": {
              "x": 5,
              "y": 0,
              "width": 3,
              "height": 1
            }
          },
          {
            "id": 2795426098608308,
            "definition": {
              "title": "Disable Eviction (Unique values)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "max:aerospike.server.sets.disable_eviction{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": "=",
                      "value": 0,
                      "palette": "white_on_green"
                    },
                    {
                      "comparator": "<",
                      "value": 0,
                      "palette": "white_on_red"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "area",
                "yaxis": {
                  "include_zero": true
                }
              }
            },
            "layout": {
              "x": 2,
              "y": 1,
              "width": 3,
              "height": 1
            }
          },
          {
            "id": 6896925727056882,
            "definition": {
              "title": "Enable Index (Unique values)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "max:aerospike.server.sets.enable_index{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": "=",
                      "value": 0,
                      "palette": "white_on_green"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "yaxis": {
                  "include_zero": false
                },
                "type": "area"
              }
            },
            "layout": {
              "x": 5,
              "y": 1,
              "width": 3,
              "height": 1
            }
          }
        ]
      },
      "layout": {
        "x": 4,
        "y": 0,
        "width": 8,
        "height": 3
      }
    },
    {
      "id": 3963036502086750,
      "definition": {
        "type": "note",
        "content": "The **Set View** dashboard visualizes key set-level metrics, including stop-writes, quotas, data utilization, and more.",
        "background_color": "white",
        "font_size": "14",
        "text_align": "left",
        "vertical_align": "top",
        "show_tick": false,
        "tick_pos": "50%",
        "tick_edge": "left",
        "has_padding": false
      },
      "layout": {
        "x": 0,
        "y": 2,
        "width": 4,
        "height": 1
      }
    },
    {
      "id": 1607546769582553,
      "definition": {
        "title": "Objects",
        "background_color": "blue",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 153607814232626,
            "definition": {
              "title": "Master & Replica (max)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:aerospike.server.sets.objects{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "value": 0,
                      "palette": "white_on_green"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "area",
                "yaxis": {
                  "include_zero": true
                }
              }
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 2910673436746182,
            "definition": {
              "title": "Master & Replica",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "min:aerospike.server.sets.objects{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "avg:aerospike.server.sets.objects{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "max:aerospike.server.sets.objects{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    }
                  ],
                  "response_format": "scalar",
                  "sort": {
                    "count": 500,
                    "order_by": [
                      {
                        "type": "formula",
                        "index": 0,
                        "order": "desc"
                      }
                    ]
                  },
                  "formulas": [
                    {
                      "alias": "Min",
                      "formula": "query1",
                      "conditional_formats": [
                        {
                          "comparator": ">=",
                          "value": 0,
                          "palette": "green_on_white"
                        }
                      ]
                    },
                    {
                      "alias": "Avg",
                      "formula": "query2",
                      "conditional_formats": [
                        {
                          "comparator": ">=",
                          "value": 0,
                          "palette": "green_on_white"
                        }
                      ]
                    },
                    {
                      "alias": "Max",
                      "formula": "query3",
                      "conditional_formats": [
                        {
                          "comparator": ">=",
                          "value": 0,
                          "palette": "green_on_white"
                        }
                      ]
                    }
                  ]
                }
              ],
              "has_search_bar": "auto"
            },
            "layout": {
              "x": 3,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 7614947523709538,
            "definition": {
              "title": "Master & Replica",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "vertical",
              "legend_columns": [
                "avg",
                "min",
                "max"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Master Objects",
                      "formula": "query1"
                    },
                    {
                      "alias": "Tombstones",
                      "formula": "query2"
                    },
                    {
                      "alias": "Truncations",
                      "formula": "query3"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:aerospike.server.sets.objects{$aerospike_cluster, $aerospike_service, $ns, $set} by {aerospike_cluster,aerospike_service,ns,set}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "sum:aerospike.server.sets.tombstones{$aerospike_cluster, $aerospike_service, $ns, $set} by {aerospike_cluster,aerospike_service,ns,set}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "sum:aerospike.server.sets.truncate_lut{$aerospike_cluster, $aerospike_service, $ns, $set} by {aerospike_cluster,aerospike_service,ns,set}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": false
              }
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 3,
        "width": 12,
        "height": 3
      }
    },
    {
      "id": 6729629656383554,
      "definition": {
        "title": "Quota Used",
        "background_color": "purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 6060241769756806,
            "definition": {
              "title": "% Set (topk)",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "sum:aerospike.server.sets.data_used_bytes{$aerospike_cluster,$aerospike_service,$ns} by {aerospike_cluster,aerospike_service,ns,set}",
                      "aggregator": "last"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "sum:aerospike.server.sets.stop_writes_size{$aerospike_cluster,$aerospike_service,$ns} by {aerospike_cluster,aerospike_service,ns,set}",
                      "aggregator": "last"
                    }
                  ],
                  "response_format": "scalar",
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "value": 0,
                      "palette": "white_on_green"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "(query2 / query3) * 100"
                    }
                  ],
                  "sort": {
                    "count": 5,
                    "order_by": [
                      {
                        "type": "formula",
                        "index": 0,
                        "order": "desc"
                      }
                    ]
                  }
                }
              ],
              "style": {
                "display": {
                  "type": "stacked",
                  "legend": "automatic"
                }
              }
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 2362742957368796,
            "definition": {
              "title": "% Set Used",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "time": {},
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "(query2 / query3) * 100"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "sum:aerospike.server.sets.data_used_bytes{$aerospike_cluster,$aerospike_service,$ns} by {aerospike_cluster,aerospike_service,ns,set}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "sum:aerospike.server.sets.stop_writes_size{$aerospike_cluster,$aerospike_service,$ns} by {aerospike_cluster,aerospike_service,ns,set}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": false
              }
            },
            "layout": {
              "x": 3,
              "y": 0,
              "width": 9,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 6,
        "width": 12,
        "height": 3
      }
    },
    {
      "id": 6831627570304180,
      "definition": {
        "title": "Data (bytes)",
        "background_color": "pink",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 6637694690496034,
            "definition": {
              "title": "Used",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query3",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte"
                        }
                      }
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "sum:aerospike.server.sets.data_used_bytes{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    }
                  ],
                  "response_format": "scalar",
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "value": 0,
                      "palette": "white_on_green"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "area",
                "yaxis": {
                  "include_zero": true
                }
              }
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 2,
              "height": 2
            }
          },
          {
            "id": 7402494854845942,
            "definition": {
              "title": "Used",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "min:aerospike.server.sets.data_used_bytes{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:aerospike.server.sets.data_used_bytes{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "max:aerospike.server.sets.data_used_bytes{$aerospike_cluster, $aerospike_service, $ns, $set}",
                      "aggregator": "last"
                    }
                  ],
                  "response_format": "scalar",
                  "sort": {
                    "count": 500,
                    "order_by": [
                      {
                        "type": "formula",
                        "index": 0,
                        "order": "desc"
                      }
                    ]
                  },
                  "formulas": [
                    {
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte"
                        }
                      },
                      "alias": "Min",
                      "formula": "query3",
                      "conditional_formats": [
                        {
                          "comparator": ">=",
                          "value": 0,
                          "palette": "green_on_white"
                        }
                      ]
                    },
                    {
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte"
                        }
                      },
                      "alias": "Avg",
                      "formula": "query1",
                      "conditional_formats": [
                        {
                          "comparator": ">=",
                          "value": 0,
                          "palette": "green_on_white"
                        }
                      ]
                    },
                    {
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte"
                        }
                      },
                      "alias": "Max",
                      "formula": "query2",
                      "conditional_formats": [
                        {
                          "comparator": ">=",
                          "value": 0,
                          "palette": "green_on_white"
                        }
                      ]
                    }
                  ]
                }
              ],
              "has_search_bar": "auto"
            },
            "layout": {
              "x": 2,
              "y": 0,
              "width": 2,
              "height": 2
            }
          },
          {
            "id": 7573327004659248,
            "definition": {
              "title": "Used",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max"
              ],
              "time": {},
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Data used",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte"
                        }
                      },
                      "formula": "query3"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "sum:aerospike.server.sets.data_used_bytes{$aerospike_cluster, $aerospike_service, $ns, $set} by {aerospike_cluster,aerospike_service,ns,set}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": false
              }
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 8,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 9,
        "width": 12,
        "height": 3
      }
    },
    {
      "id": 7607156278324618,
      "definition": {
        "title": "Indexes",
        "background_color": "orange",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 410378442473226,
            "definition": {
              "title": "Primary & Secondary",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "min",
                "max",
                "avg"
              ],
              "time": {},
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Indexes Populating",
                      "formula": "query1"
                    },
                    {
                      "alias": "Secondary Indexes",
                      "formula": "query2"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:aerospike.server.sets.index_populating{$aerospike_cluster, $aerospike_service, $ns, $set} by {aerospike_cluster,aerospike_service,ns,set}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "sum:aerospike.server.sets.sindexes{$aerospike_cluster, $aerospike_service, $ns, $set} by {aerospike_cluster,aerospike_service,ns,set}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": false
              }
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 12,
        "width": 12,
        "height": 3
      }
    }
  ],
  "template_variables": [
    {
      "name": "aerospike_cluster",
      "prefix": "aerospike_cluster",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "aerospike_service",
      "prefix": "aerospike_service",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "ns",
      "prefix": "ns",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "set",
      "prefix": "set",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "notify_list": [],
  "reflow_type": "fixed"
}