{"title":"Resilience4j Circuit Breaker Overview","description":"This dashboard is designed to monitor the health and performance of Resilience4j Circuit Breakers and providing insights into the behavior of the circuit breakers in a Spring Boot application. It uses Spring Boot Actuator to expose metrics and Prometheus to collect and store these metrics. \n\n-   [Resilience4j Metrics](https://resilience4j.readme.io/docs/micrometer#prometheus)\nClone this template dashboard to make changes and add your own graph widgets.","widgets":[{"id":3501442757873750,"definition":{"title":"Summary","background_color":"gray","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3494549748379606,"definition":{"title":"Number of closed CircuitBreaker","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:resilience4j.circuitbreaker.state{state:closed}","aggregator":"last"}],"conditional_formats":[{"comparator":">","value":0,"palette":"white_on_green"}],"formulas":[{"formula":"query1"}]}],"autoscale":true,"precision":0,"timeseries_background":{"yaxis":{"include_zero":true},"type":"area"}},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":5787006276604120,"definition":{"title":"Number of open CircuitBreaker","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:resilience4j.circuitbreaker.state{state:open}","aggregator":"last"}],"conditional_formats":[{"comparator":"=","value":0,"palette":"white_on_green"},{"comparator":">=","value":1,"palette":"white_on_yellow"}],"formulas":[{"formula":"query1"}]}],"autoscale":true,"precision":0,"timeseries_background":{"yaxis":{"include_zero":true},"type":"area"}},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":5152242796496788,"definition":{"title":"Number of half_open CircuitBreaker","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:resilience4j.circuitbreaker.state{state:half_open}","aggregator":"last"}],"conditional_formats":[{"comparator":"=","value":0,"palette":"white_on_green"},{"comparator":">=","value":1,"palette":"white_on_yellow"}],"formulas":[{"formula":"query1"}]}],"autoscale":true,"precision":0,"timeseries_background":{"yaxis":{"include_zero":true},"type":"area"}},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":5317812649799226,"definition":{"title":"CircuitBreaker states","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:resilience4j.circuitbreaker.state{$service,$state} by {state,service}"}],"response_format":"timeseries","style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":12,"height":4}}]},"layout":{"x":0,"y":0,"width":12,"height":7}},{"id":911329350165930,"definition":{"title":"Circuit Breaker","background_color":"yellow","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":1469478086748770,"definition":{"title":"Failure Rate: $circuit_breaker_name","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:resilience4j.circuitbreaker.failure.rate{$circuit_breaker_name}","aggregator":"last"}],"conditional_formats":[{"comparator":">","value":50,"palette":"white_on_red"},{"comparator":">=","value":40,"palette":"white_on_yellow"},{"comparator":"<","value":40,"palette":"white_on_green"}],"formulas":[{"formula":"default_zero(cutoff_min(query1, 0))"}]}],"autoscale":true,"precision":0,"timeseries_background":{"type":"area"}},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":5088831156945942,"definition":{"title":"Call rate: $circuit_breaker_name","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:resilience4j.circuitbreaker.calls.seconds.count{$service, $state}.as_rate()"},{"data_source":"metrics","name":"query2","query":"sum:resilience4j.circuitbreaker.calls.seconds.sum{$service, $state} by {service}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":0,"width":6,"height":3}},{"id":8277186327531272,"definition":{"title":"Buffered calls: $circuit_breaker_name","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:resilience4j.circuitbreaker.buffered.calls{$service, $circuit_breaker_name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":3,"width":6,"height":3}},{"id":8901593457473692,"definition":{"title":"Average call durations","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"per_minute(query1)"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:resilience4j.circuitbreaker.calls.seconds.sum{$service}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":3,"width":6,"height":3}}]},"layout":{"x":0,"y":0,"width":12,"height":7,"is_column_break":true}}],"template_variables":[{"name":"service","prefix":"service","available_values":[],"default":"*"},{"name":"state","prefix":"state","available_values":["closed","disabled","forced_open","half_open","metrics_only","open"],"default":"*"},{"name":"circuit_breaker_name","prefix":"circuit_breaker_name","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}