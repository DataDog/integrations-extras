{
  "title": "Redis Enterprise Prometheus - Node",
  "description": "This Dashboard provides visualization of metrics at the Redis Enterprise Node level. In Redis Enterprise, a node is a single server with the Redis Enterprise Software installed on it. Memory usage, cpu usage, as well as key shard details per node are all visualized in the Node dashboard.",
  "widgets": [
    {
      "id": 8148371123349408,
      "definition": {
        "title": "Node Overview",
        "background_color": "purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 6906627780487202,
            "definition": {
              "type": "note",
              "title": "About The Node Dashboard",
              "content": "This Dashboard provides visualization of metrics at the Redis Enterprise Node level. In Redis Enterprise, a node is a single server with the Redis Enterprise Software installed on it. Memory usage, cpu usage, as well as key shard details per node are all visualized in the Node dashboard.",
              "background_color": "vivid_purple",
              "font_size": "16",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 5228948460391968,
            "definition": {
              "title": "Memory Usage",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "used memory",
                      "formula": "query1",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte_in_binary_bytes_family"
                        }
                      }
                    },
                    {
                      "alias": "free memory",
                      "formula": "query2",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte_in_binary_bytes_family"
                        }
                      }
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.node_available_memory_bytes{$cluster,$node}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "avg:rdse2.node_memory_MemFree_bytes{$cluster,$node}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 4
            }
          },
          {
            "id": 679433474495616,
            "definition": {
              "title": "Cluster Nodes",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.node_os_info{$cluster, $node} by {internal-hostname,node}",
                      "aggregator": "avg"
                    }
                  ],
                  "response_format": "scalar",
                  "sort": {
                    "count": 500,
                    "order_by": [
                      {
                        "type": "formula",
                        "index": 0,
                        "order": "desc"
                      }
                    ]
                  },
                  "formulas": [
                    {
                      "cell_display_mode": "bar",
                      "alias": "up",
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "has_search_bar": "auto"
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 6042661341631244,
            "definition": {
              "title": "CPU Usage",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      }
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster, threadname:redis-server*, $node} by {node}.as_rate()"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 6,
              "y": 4,
              "width": 6,
              "height": 4
            }
          },
          {
            "id": 1837158733093732,
            "definition": {
              "title": "Node Latency",
              "title_size": "16",
              "title_align": "left",
              "time": {
                "hide_incomplete_cost_data": true
              },
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse.node_avg_latency{$cluster, $node}",
                      "aggregator": "avg"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "area",
                "yaxis": {
                  "include_zero": false
                }
              }
            },
            "layout": {
              "x": 0,
              "y": 5,
              "width": 3,
              "height": 3
            }
          },
          {
            "id": 2897465224634902,
            "definition": {
              "title": "Node Connections",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.endpoint_client_connections.count{$cluster}.as_count()",
                      "aggregator": "sum"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "yaxis": {
                  "include_zero": false
                },
                "type": "area"
              }
            },
            "layout": {
              "x": 3,
              "y": 5,
              "width": 3,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 12,
        "height": 9
      }
    },
    {
      "id": 4037146018383802,
      "definition": {
        "title": "Shard Resources",
        "background_color": "pink",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 1891697531647102,
            "definition": {
              "title": "Shard CPU Usage",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.namedprocess_namegroup_cpu_seconds.count{(mode:system or mode:user) AND $cluster AND $node}.as_count()"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 4
            }
          },
          {
            "id": 4312372150275580,
            "definition": {
              "title": "File Descriptors",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "open fds",
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.namedprocess_namegroup_open_filedesc{*} by {node}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 4
            }
          },
          {
            "id": 8234244232090526,
            "definition": {
              "title": "Free Memory",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "avg:rdse2.node_available_memory_bytes{$cluster}",
                      "aggregator": "avg"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.node_memory_MemFree_bytes{$cluster}",
                      "aggregator": "avg"
                    }
                  ],
                  "formulas": [
                    {
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "percent"
                        }
                      },
                      "formula": "100 - (query2 / query1)"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "area"
              }
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 3,
              "height": 3
            }
          },
          {
            "id": 4183408001635884,
            "definition": {
              "title": "Master Shards",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.redis_server_used_memory{$cluster, $node, role:master}",
                      "aggregator": "sum"
                    }
                  ],
                  "formulas": [
                    {
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit"
                        }
                      },
                      "formula": "count_nonzero(query1)"
                    }
                  ]
                }
              ],
              "autoscale": false,
              "precision": 0,
              "timeseries_background": {
                "type": "area"
              }
            },
            "layout": {
              "x": 3,
              "y": 4,
              "width": 3,
              "height": 3
            }
          },
          {
            "id": 4625656583393914,
            "definition": {
              "title": "Replica Shards",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.redis_server_used_memory{$cluster, $node, role:slave}",
                      "aggregator": "sum"
                    }
                  ],
                  "formulas": [
                    {
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit"
                        }
                      },
                      "formula": "count_nonzero(query1)"
                    }
                  ]
                }
              ],
              "autoscale": false,
              "precision": 0,
              "timeseries_background": {
                "type": "area"
              }
            },
            "layout": {
              "x": 6,
              "y": 4,
              "width": 3,
              "height": 3
            }
          },
          {
            "id": 3454087262439336,
            "definition": {
              "title": "Databases",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:rdse2.redis_server_up{$cluster, $node, role:master}",
                      "aggregator": "last"
                    }
                  ],
                  "response_format": "scalar"
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "bars"
              }
            },
            "layout": {
              "x": 9,
              "y": 4,
              "width": 3,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 9,
        "width": 12,
        "height": 8
      }
    },
    {
      "id": 6623656971820348,
      "definition": {
        "title": "Node Details",
        "background_color": "vivid_orange",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 5638763751268202,
            "definition": {
              "title": "Node Details",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.node_os_info{$cluster} by {cluster,host,node,name,version_id}",
                      "aggregator": "avg"
                    }
                  ],
                  "response_format": "scalar",
                  "sort": {
                    "count": 500,
                    "order_by": [
                      {
                        "type": "formula",
                        "index": 0,
                        "order": "desc"
                      }
                    ]
                  },
                  "formulas": [
                    {
                      "cell_display_mode": "bar",
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "has_search_bar": "auto"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 4
            }
          },
          {
            "id": 1216278251152994,
            "definition": {
              "title": "Top 10 Shards by Used Memory",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "top10(query1)",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte_in_binary_bytes_family"
                        }
                      }
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.redis_server_used_memory{$cluster, $node,redis:*} by {cluster,node,redis}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 12,
              "height": 4
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 12,
        "height": 9,
        "is_column_break": true
      }
    },
    {
      "id": 5249389376885324,
      "definition": {
        "title": "Node Operations",
        "background_color": "blue",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 7788477609382880,
            "definition": {
              "title": "Node Network Traffic",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "egress",
                      "formula": "query1"
                    },
                    {
                      "alias": "ingress",
                      "formula": "query2"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse.node_egress_bytes_median{$cluster, $node}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "avg:rdse.node_ingress_bytes_median{$cluster, $node}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "blue",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 4
            }
          },
          {
            "id": 4265268039928674,
            "definition": {
              "title": "Node CPU Usage",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "user",
                      "formula": "query1"
                    },
                    {
                      "alias": "system",
                      "formula": "query2"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.node_cpu_seconds_total.count{cluster:$cluster, node:$node, mode:user}.as_rate()"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "avg:rdse2.node_cpu_seconds_total.count{$cluster, $node,mode:system}.as_rate()"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 12,
              "height": 4
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 9,
        "width": 12,
        "height": 9
      }
    },
    {
      "id": 3375023652445906,
      "definition": {
        "title": "Node Statistics",
        "background_color": "green",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 956650559907366,
            "definition": {
              "title": "Shard Keys",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "vertical",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "key count",
                      "formula": "query1"
                    },
                    {
                      "alias": "expired keys",
                      "formula": "query2"
                    },
                    {
                      "alias": "trimmed keys",
                      "formula": "query3"
                    },
                    {
                      "alias": "evicted keys",
                      "formula": "query4"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:rdse2.redis_server_db0_keys{$cluster, $node} by {redis}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "sum:rdse2.redis_server_expired_keys{$cluster, $node} by {redis}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "sum:rdse2.redis_server_keys_trimmed{$cluster, $node} by {redis}"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query4",
                      "query": "sum:rdse2.redis_server_evicted_keys{$cluster, $node} by {redis}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "green",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 4
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 18,
        "width": 12,
        "height": 5
      }
    },
    {
      "id": 8598977049220560,
      "definition": {
        "title": "Shard Clients",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "horizontal",
        "legend_columns": [
          "avg",
          "min",
          "max",
          "value",
          "sum"
        ],
        "type": "timeseries",
        "requests": [
          {
            "formulas": [
              {
                "alias": "blocked clients",
                "formula": "query1"
              },
              {
                "alias": "connected clients",
                "formula": "query2"
              }
            ],
            "queries": [
              {
                "data_source": "metrics",
                "name": "query1",
                "query": "avg:rdse2.redis_server_blocked_clients{$cluster, $node} by {redis}"
              },
              {
                "data_source": "metrics",
                "name": "query2",
                "query": "avg:rdse2.redis_server_connected_clients{$cluster, $node} by {redis}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "green",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 12,
        "height": 4
      }
    }
  ],
  "template_variables": [
    {
      "name": "cluster",
      "prefix": "cluster",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "node",
      "prefix": "node",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "notify_list": [],
  "reflow_type": "fixed"
}