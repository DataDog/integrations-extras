{
  "title": "Redis Enterprise - Proxy Threads v2",
  "description": "Redis Enterprise Proxy Threads are the individual threads of the proxy process",
  "widgets": [
    {
      "id": 4181575023845814,
      "definition": {
        "title": "Proxy Threads Overview",
        "background_color": "vivid_blue",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 7104524980730882,
            "definition": {
              "type": "note",
              "content": "Redis Software allows multiple databases to be created. Each database gets an endpoint (a unique URL and port on the FQDN). This endpoint receives all the traffic for all operations for that database. By default, Redis Software binds this database endpoint to one of the proxies on a single node in the cluster. This proxy becomes an active proxy and receives all the operations for the given database. (Note that if the node with the active proxy fails, a new proxy on another node takes over as part of the failover process automatically.)",
              "background_color": "white",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 12,
        "height": 3
      }
    },
    {
      "id": 2976279033317650,
      "definition": {
        "title": "Proxy Threads - Workers",
        "background_color": "vivid_green",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 2418700679517252,
            "definition": {
              "title": "Workers",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "vertical",
              "legend_columns": [
                "avg",
                "min",
                "max"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "system",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      },
                      "formula": "query1"
                    },
                    {
                      "alias": "user",
                      "formula": "query2",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      }
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster, threadname:worker*, mode:system}.as_count()"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "avg:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster, threadname:worker* , mode:user}.as_count()"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "color_order": "shuffled",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 3,
        "width": 12,
        "height": 4
      }
    },
    {
      "id": 7717974699945770,
      "definition": {
        "title": "Proxy Threads - Listeners",
        "background_color": "vivid_yellow",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 1205350136707792,
            "definition": {
              "title": "Listeners",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "system",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      },
                      "formula": "query1"
                    },
                    {
                      "alias": "user",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      },
                      "formula": "query2"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster,mode:system, threadname:listener}.as_rate()"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "sum:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster,mode:user, threadname:listener}.as_rate()"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "color_order": "shuffled",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 7,
        "width": 12,
        "height": 4
      }
    },
    {
      "id": 5330583329708778,
      "definition": {
        "title": "Proxy File Descriptors",
        "background_color": "vivid_purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 5368842331723112,
            "definition": {
              "title": "Open FDs",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.namedprocess_namegroup_open_filedesc{$cluster}",
                      "aggregator": "last"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0,
              "timeseries_background": {
                "type": "area"
              }
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 2048427695631512,
            "definition": {
              "title": "Max FDs",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.namedprocess_namegroup_open_filedesc{$cluster}",
                      "aggregator": "max"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0,
              "timeseries_background": {
                "type": "area"
              }
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 5133761891470680,
            "definition": {
              "title": "Resident Memory",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:rdse2.redis_server_allocator_resident{$cluster}",
                      "aggregator": "avg"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "byte_in_binary_bytes_family"
                        }
                      }
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "area"
              }
            },
            "layout": {
              "x": 8,
              "y": 0,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 12,
        "height": 3,
        "is_column_break": true
      }
    },
    {
      "id": 1107644513966124,
      "definition": {
        "title": "Proxy Threads - Core",
        "background_color": "vivid_orange",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 4493462146648202,
            "definition": {
              "title": "Core",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "anonymous",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      },
                      "formula": "query1"
                    },
                    {
                      "alias": "mgmt",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      },
                      "formula": "query2"
                    },
                    {
                      "alias": "directory",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      },
                      "formula": "query3"
                    },
                    {
                      "alias": "offloader",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      },
                      "formula": "query4"
                    },
                    {
                      "alias": "dmcproxy",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      },
                      "formula": "query5"
                    },
                    {
                      "alias": "logger",
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      },
                      "formula": "query6"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster,threadname:anonymous*}.as_rate()"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "sum:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster,threadname:mgmt*}.as_rate()"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query3",
                      "query": "sum:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster,threadname:directory*}.as_rate()"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query4",
                      "query": "sum:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster,threadname:offloader*}.as_rate()"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query5",
                      "query": "sum:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster,threadname:dmcproxy*}.as_rate()"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query6",
                      "query": "sum:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster,threadname:logger*}.as_rate()"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "color_order": "shuffled",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 3,
        "width": 12,
        "height": 4
      }
    },
    {
      "id": 4319695888231230,
      "definition": {
        "title": "Proxy Threads - CLI Session",
        "background_color": "vivid_pink",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 4608051052982734,
            "definition": {
              "title": "CLI Session",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "number_format": {
                        "unit": {
                          "type": "canonical_unit",
                          "unit_name": "fraction"
                        }
                      },
                      "formula": "derivative(query2)"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "avg:rdse2.namedprocess_namegroup_thread_cpu_seconds.count{$cluster ,threadname:cli_session-*} by {threadname}.as_rate()"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "order_by": "values",
                    "color_order": "shuffled",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 7,
        "width": 12,
        "height": 4
      }
    }
  ],
  "template_variables": [
    {
      "name": "cluster",
      "prefix": "cluster",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "notify_list": [],
  "reflow_type": "fixed"
}