{
  "title": "Akamai DataStream 2 Overview",
  "description": "This Dashboard provides a high level overview of your Akamai DataStream 2 performance and security logs for your delivery properties. \n\nView detailed analytics on client information, traffic, caching, latency, and more.\n\nFor further reading, see the [Akamai Datastream 2 Integration Docs](https://docs.datadoghq.com/integrations/akamai_datastream_2/)\n\nClone this template dashboard to make changes and add your own graph widgets.",
  "widgets": [
    {
      "id": 8983504789241156,
      "definition": {
        "title": "New group",
        "type": "group",
        "banner_img": "https://www.akamai.com/site/en/images/logo/media-resources/full-color-logo.png",
        "show_title": false,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 6384729702856906,
            "definition": {
              "type": "note",
              "content": "[DataStream](https://techdocs.akamai.com/datastream2/docs) captures performance and security logs from your delivery properties and streams them in near real-time to provide complete monitoring. \n\nClone this template dashboard to make changes and add your own graph widgets.\n",
              "background_color": "white",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": { "x": 0, "y": 0, "width": 6, "height": 2 }
          }
        ]
      },
      "layout": { "x": 0, "y": 0, "width": 6, "height": 5 }
    },
    {
      "id": 1291241338030388,
      "definition": {
        "title": "DataStream Overview",
        "type": "group",
        "background_color": "vivid_blue",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 7498172991094206,
            "definition": {
              "title": "Requests by Status Code",
              "title_size": "16",
              "title_align": "left",
              "requests": [
                {
                  "formulas": [{ "formula": "query2" }],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query2",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "@http.status_code",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ]
                }
              ],
              "type": "sunburst",
              "legend": { "type": "inline" }
            },
            "layout": { "x": 0, "y": 0, "width": 6, "height": 4 }
          },
          {
            "id": 6476534050591056,
            "definition": {
              "title": "Success Rate (2xx %)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [{ "formula": "query1 / query2 * 100" }],
                  "conditional_formats": [
                    {
                      "comparator": "<=",
                      "palette": "white_on_red",
                      "value": 0.7
                    },
                    {
                      "comparator": "<=",
                      "palette": "white_on_yellow",
                      "value": 0.8
                    },
                    {
                      "comparator": ">=",
                      "palette": "white_on_green",
                      "value": 0.9
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @akamai.datastream.statusCode:[200 TO 299]"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query2",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ]
                }
              ],
              "autoscale": false,
              "custom_unit": "%",
              "precision": 2,
              "timeseries_background": { "type": "bars" }
            },
            "layout": { "x": 0, "y": 4, "width": 3, "height": 1 }
          },
          {
            "id": 3915592516723270,
            "definition": {
              "title": "Error Rate (4xx + 5xx %)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [{ "formula": "query1 / query2 * 100" }],
                  "conditional_formats": [
                    {
                      "comparator": ">=",
                      "palette": "white_on_red",
                      "value": 10
                    },
                    {
                      "comparator": ">=",
                      "palette": "white_on_yellow",
                      "value": 5
                    },
                    {
                      "comparator": "<",
                      "palette": "white_on_green",
                      "value": 5
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @akamai.datastream.statusCode:[400 TO 599]"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query2",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ]
                }
              ],
              "autoscale": false,
              "custom_unit": "%",
              "precision": 2,
              "timeseries_background": { "type": "bars" }
            },
            "layout": { "x": 3, "y": 4, "width": 3, "height": 1 }
          },
          {
            "id": 352611549897328,
            "definition": {
              "title": "Cache Hit Ratio",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [{ "formula": "(query1 / query2) * 100" }],
                  "conditional_formats": [
                    {
                      "comparator": ">=",
                      "palette": "white_on_green",
                      "value": 95
                    },
                    {
                      "comparator": ">=",
                      "palette": "black_on_light_green",
                      "value": 85
                    },
                    {
                      "comparator": ">=",
                      "palette": "black_on_light_yellow",
                      "value": 75
                    },
                    {
                      "comparator": ">=",
                      "palette": "white_on_yellow",
                      "value": 65
                    },
                    {
                      "comparator": "<",
                      "palette": "white_on_red",
                      "value": 65
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @cacheStatus:1"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query2",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ]
                }
              ],
              "autoscale": true,
              "custom_unit": "%",
              "precision": 2,
              "timeseries_background": { "type": "bars" }
            },
            "layout": { "x": 0, "y": 5, "width": 3, "height": 1 }
          },
          {
            "id": 260521524041852,
            "definition": {
              "title": "Cache Miss Rate",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    { "formula": "100 - ((query1 / query2) * 100)" }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": ">=",
                      "palette": "white_on_red",
                      "value": 90
                    },
                    {
                      "comparator": ">=",
                      "palette": "black_on_light_red",
                      "value": 75
                    },
                    {
                      "comparator": ">=",
                      "palette": "black_on_light_yellow",
                      "value": 65
                    },
                    {
                      "comparator": ">=",
                      "palette": "black_on_light_green",
                      "value": 50
                    },
                    {
                      "comparator": "<",
                      "palette": "white_on_green",
                      "value": 35
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @cacheStatus:1"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query2",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ]
                }
              ],
              "autoscale": true,
              "custom_unit": "%",
              "precision": 2,
              "timeseries_background": { "type": "bars" }
            },
            "layout": { "x": 3, "y": 5, "width": 3, "height": 1 }
          },
          {
            "id": 3247005155402622,
            "definition": {
              "title": "Akamai Datastream Monitors",
              "title_size": "13",
              "title_align": "left",
              "type": "manage_status",
              "display_format": "countsAndList",
              "color_preference": "text",
              "hide_zero_counts": true,
              "query": "type:log  AND akamai",
              "sort": "status,asc",
              "count": 50,
              "start": 0,
              "summary_type": "monitors",
              "show_priority": false,
              "show_last_triggered": false
            },
            "layout": { "x": 0, "y": 6, "width": 6, "height": 2 }
          },
          {
            "id": 1665763882734808,
            "definition": {
              "title": "Akamai DataStream 2 Services",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Requests",
                      "cell_display_mode": "bar",
                      "limit": { "count": 25, "order": "desc" },
                      "formula": "query1"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "service",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ]
                }
              ],
              "has_search_bar": "auto"
            },
            "layout": { "x": 0, "y": 8, "width": 6, "height": 2 }
          }
        ]
      },
      "layout": { "x": 6, "y": 0, "width": 6, "height": 11 }
    },
    {
      "id": 7231766875730122,
      "definition": {
        "title": "Client information",
        "type": "group",
        "background_color": "vivid_blue",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 55530002738184,
            "definition": {
              "title": "Logs by Region",
              "title_size": "16",
              "title_align": "left",
              "type": "geomap",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": { "count": 10, "order": "desc" }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "@network.client.geoip.country.iso_code",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ]
                }
              ],
              "style": { "palette": "hostmap_blues", "palette_flip": false },
              "view": { "focus": "WORLD" }
            },
            "layout": { "x": 0, "y": 0, "width": 6, "height": 4 }
          },
          {
            "id": 6407447987762140,
            "definition": {
              "title": "Logs by OS",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "a",
                      "limit": { "count": 10, "order": "desc" }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "a",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "@http.useragent_details.os.family",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "layout": { "x": 0, "y": 4, "width": 3, "height": 3 }
          },
          {
            "id": 3659880229860148,
            "definition": {
              "title": "Logs by User Agent",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "a",
                      "limit": { "count": 10, "order": "desc" }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "a",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "@http.useragent_details.browser.family",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "layout": { "x": 3, "y": 4, "width": 3, "height": 3 }
          },
          {
            "id": 1999063834873014,
            "definition": {
              "title": "Log Count by Client IP",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Count",
                      "limit": { "count": 10, "order": "desc" },
                      "formula": "query1"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "@network.client.ip",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "layout": { "x": 0, "y": 7, "width": 3, "height": 5 }
          },
          {
            "id": 268620944357942,
            "definition": {
              "title": "Request Method",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Count",
                      "cell_display_mode": "bar",
                      "limit": { "count": 10, "order": "desc" },
                      "formula": "a"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "a",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "@http.method",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "layout": { "x": 3, "y": 7, "width": 3, "height": 3 }
          },
          {
            "id": 7306380486968644,
            "definition": {
              "title": "Request port",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Port",
                      "limit": { "count": 10, "order": "desc" },
                      "formula": "query1"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "@akamai.datastream.reqPort",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "layout": { "x": 3, "y": 10, "width": 3, "height": 2 }
          },
          {
            "id": 2895677101118860,
            "definition": {
              "title": "TLS Version",
              "requests": [
                {
                  "formulas": [{ "formula": "a" }],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "a",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "@tlsVersion",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ]
                }
              ],
              "type": "sunburst",
              "legend": { "type": "inline" }
            },
            "layout": { "x": 0, "y": 12, "width": 6, "height": 4 }
          }
        ]
      },
      "layout": { "x": 0, "y": 5, "width": 6, "height": 17 }
    },
    {
      "id": 8968203161791408,
      "definition": {
        "title": "Logs",
        "type": "group",
        "background_color": "vivid_orange",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 530558535748238,
            "definition": {
              "title": "Total logs",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [{ "formula": "query1" }],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": { "type": "bars", "yaxis": {} }
            },
            "layout": { "x": 0, "y": 0, "width": 2, "height": 2 }
          },
          {
            "id": 6045201317030634,
            "definition": {
              "title": "Logs received per second",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [{ "formula": "query1" }],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "interval": 1000, "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": { "x": 2, "y": 0, "width": 4, "height": 2 }
          },
          {
            "id": 877045850803096,
            "definition": {
              "title": "Logs Stream",
              "title_size": "16",
              "title_align": "left",
              "type": "log_stream",
              "indexes": [],
              "query": "source:akamai.datastream $service",
              "sort": { "column": "time", "order": "desc" },
              "columns": ["service"],
              "show_date_column": true,
              "show_message_column": true,
              "message_display": "expanded-md"
            },
            "layout": { "x": 0, "y": 2, "width": 6, "height": 6 }
          },
          {
            "id": 828844315990866,
            "definition": {
              "type": "note",
              "content": "When you Create a stream or Edit a stream, you can choose to log midgress traffic within the Akamai network, such as between two edge servers. This feature also requires enabling the Collect midgress traffic option in the DataStream behavior for your property in Property Manager.\n\nFor more information visit [Data set parameters documentation](https://techdocs.akamai.com/datastream2/docs/data-set-parameters)",
              "background_color": "orange",
              "font_size": "12",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": false,
              "tick_pos": "25%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": { "x": 0, "y": 8, "width": 6, "height": 2 }
          }
        ]
      },
      "layout": { "x": 6, "y": 11, "width": 6, "height": 11 }
    },
    {
      "id": 6253045991840248,
      "definition": {
        "title": "Traffic",
        "type": "group",
        "background_color": "vivid_orange",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 7452172931890926,
            "definition": {
              "type": "note",
              "content": "Bandwidth usage should generally be steady, and correlate with request rate. CDN cost is generally a function of bandwidth. \nSudden spikes in bandwidth could either be good (organic traffic increase) or bad (malicious actors trying to increase your system load with a high number of requests).\n\n",
              "background_color": "orange",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": { "x": 0, "y": 0, "width": 6, "height": 2 }
          },
          {
            "id": 21246170256338,
            "definition": {
              "title": "Bandwidth Over Time",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [{ "alias": "Bandwidth", "formula": "query1" }],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": {
                        "metric": "@network.bytes_written",
                        "aggregation": "sum"
                      },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ],
                  "style": {
                    "palette": "blue",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ]
            },
            "layout": { "x": 0, "y": 2, "width": 6, "height": 3 }
          },
          {
            "id": 45187831740568,
            "definition": {
              "title": "Requests by HTTP status",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [{ "formula": "query3" }],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query3",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "@akamai.datastream.statusCode",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "markers": [{ "value": "y = 0", "display_type": "error dashed" }]
            },
            "layout": { "x": 0, "y": 5, "width": 6, "height": 3 }
          },
          {
            "id": 5931340453150762,
            "definition": {
              "title": "Average Object Size (Bandwidth/Requests)",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    { "alias": "Average Object Size", "formula": "query4" }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": {
                        "metric": "@network.bytes_written",
                        "aggregation": "avg"
                      },
                      "name": "query4",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ],
                  "style": {
                    "palette": "blue",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 0, "y": 8, "width": 6, "height": 3 }
          },
          {
            "id": 7740164180675564,
            "definition": {
              "title": "Weekly Bandwidth Change",
              "title_size": "16",
              "title_align": "left",
              "type": "change",
              "requests": [
                {
                  "formulas": [
                    { "formula": "week_before(query1)" },
                    { "formula": "query1" }
                  ],
                  "order_by": "change",
                  "order_dir": "desc",
                  "compare_to": "hour_before",
                  "response_format": "scalar",
                  "increase_good": true,
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": {
                        "metric": "@network.bytes_written",
                        "aggregation": "avg"
                      },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "service",
                          "sort": {
                            "metric": "@network.bytes_written",
                            "aggregation": "avg",
                            "order": "desc"
                          },
                          "limit": 10
                        }
                      ]
                    }
                  ],
                  "change_type": "absolute"
                }
              ]
            },
            "layout": { "x": 0, "y": 11, "width": 6, "height": 3 }
          },
          {
            "id": 2128043613814784,
            "definition": {
              "title": "Objects by Size",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    { "alias": "< 1 kB", "formula": "query2" },
                    { "alias": "1 kB - 10 kB", "formula": "query1" },
                    { "alias": "10kB - 100 kB", "formula": "query3" },
                    { "alias": "100kB - 1 MB", "formula": "query4" },
                    { "alias": "1 MB - 10 MB", "formula": "query5" },
                    { "alias": "10 MB - 100 MB", "formula": "query6" },
                    { "alias": "> 100 MB", "formula": "query7" }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @network.bytes_written:<1000"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query2",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @network.bytes_written:[1000 TO 10000]"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @network.bytes_written:[10000 TO 100000]"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query3",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @network.bytes_written:[100000 TO 1000000]"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query4",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @network.bytes_written:[1000000 TO 10000000]"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query5",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @network.bytes_written:[10000000 TO 100000000]"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query6",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @network.bytes_written:>100000000"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query7",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ]
            },
            "layout": { "x": 0, "y": 14, "width": 6, "height": 4 }
          },
          {
            "id": 5604191786150664,
            "definition": {
              "title": "Objects Size Distribution",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "type": "distribution",
              "xaxis": {
                "max": "auto",
                "include_zero": true,
                "scale": "linear",
                "min": "auto"
              },
              "yaxis": {
                "max": "auto",
                "include_zero": true,
                "scale": "linear",
                "min": "auto"
              },
              "requests": [
                {
                  "query": {
                    "search": { "query": "source:akamai.datastream $service" },
                    "data_source": "logs",
                    "compute": {
                      "metric": "@network.bytes_written",
                      "aggregation": "avg"
                    },
                    "name": "query1",
                    "indexes": ["*"],
                    "group_by": []
                  },
                  "request_type": "histogram",
                  "style": { "palette": "green" }
                }
              ]
            },
            "layout": { "x": 0, "y": 18, "width": 6, "height": 3 }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 6,
        "height": 22,
        "is_column_break": true
      }
    },
    {
      "id": 4763242894510612,
      "definition": {
        "title": "Caching",
        "type": "group",
        "background_color": "vivid_blue",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 571623391099862,
            "definition": {
              "title": "Cache Hits vs Misses",
              "title_size": "16",
              "title_align": "left",
              "requests": [
                {
                  "formulas": [{ "formula": "query1" }],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "@cacheStatus",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ]
                }
              ],
              "type": "sunburst",
              "legend": { "type": "inline" }
            },
            "layout": { "x": 0, "y": 0, "width": 6, "height": 4 }
          },
          {
            "id": 7861036132046654,
            "definition": {
              "type": "note",
              "content": "Cache hits are incoming requests that are served from cache at the edge. Content served from cache by parent servers is not reported by DataStream by default and will be reported as a cache miss.",
              "background_color": "blue",
              "font_size": "12",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "25%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": { "x": 0, "y": 4, "width": 2, "height": 4 }
          },
          {
            "id": 1344577662213546,
            "definition": {
              "title": "Caching Overview",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    { "alias": "Cache Hits", "formula": "query1" },
                    { "alias": "Cache Misses", "formula": "query2" }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @cacheStatus:1"
                      },
                      "data_source": "logs",
                      "compute": {
                        "metric": "@network.bytes_written",
                        "aggregation": "sum"
                      },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @cacheStatus:0"
                      },
                      "data_source": "logs",
                      "compute": {
                        "metric": "@network.bytes_written",
                        "aggregation": "sum"
                      },
                      "name": "query2",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ]
            },
            "layout": { "x": 2, "y": 4, "width": 4, "height": 2 }
          },
          {
            "id": 6451195514289402,
            "definition": {
              "title": "Cache Hit Ratio",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Requests Satisfied from Cache (%) ",
                      "formula": "(query1 / query2) * 100"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @cacheStatus:1"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query2",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ],
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 2, "y": 6, "width": 4, "height": 2 }
          },
          {
            "id": 394348168209158,
            "definition": {
              "title": "Weekly Hit Ratio Change",
              "title_size": "16",
              "title_align": "left",
              "type": "change",
              "requests": [
                {
                  "formulas": [
                    { "formula": "week_before((query1 / query2) * 100)" },
                    { "formula": "(query1 / query2) * 100" }
                  ],
                  "order_by": "change",
                  "order_dir": "desc",
                  "compare_to": "hour_before",
                  "response_format": "scalar",
                  "increase_good": true,
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @cacheStatus:1"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "service",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    },
                    {
                      "search": {
                        "query": "source:akamai.datastream $service"
                      },
                      "data_source": "logs",
                      "compute": { "aggregation": "count" },
                      "name": "query2",
                      "indexes": ["*"],
                      "group_by": [
                        {
                          "facet": "service",
                          "sort": { "aggregation": "count", "order": "desc" },
                          "limit": 10
                        }
                      ]
                    }
                  ],
                  "change_type": "absolute"
                }
              ]
            },
            "layout": { "x": 0, "y": 8, "width": 6, "height": 2 }
          }
        ]
      },
      "layout": { "x": 6, "y": 0, "width": 6, "height": 11 }
    },
    {
      "id": 700446093961524,
      "definition": {
        "title": "Latency",
        "type": "group",
        "background_color": "vivid_blue",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 5627581774002742,
            "definition": {
              "title": "Latency Distribution (all)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "type": "distribution",
              "xaxis": {
                "max": "auto",
                "scale": "linear",
                "min": "auto",
                "include_zero": true
              },
              "yaxis": {
                "max": "auto",
                "scale": "linear",
                "min": "auto",
                "include_zero": true
              },
              "requests": [
                {
                  "query": {
                    "search": { "query": "source:akamai.datastream $service" },
                    "data_source": "logs",
                    "compute": { "metric": "@duration", "aggregation": "avg" },
                    "name": "query1",
                    "indexes": ["*"],
                    "group_by": []
                  },
                  "request_type": "histogram",
                  "style": { "palette": "purple" }
                }
              ]
            },
            "layout": { "x": 0, "y": 0, "width": 6, "height": 3 }
          },
          {
            "id": 286055203308846,
            "definition": {
              "type": "note",
              "content": "Cache hits and misses usually have very different latencies due to the extra time required to get content from origin. Modifications to caching rules can reduce latency and improve user experience.",
              "background_color": "blue",
              "font_size": "12",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": { "x": 0, "y": 3, "width": 2, "height": 4 }
          },
          {
            "id": 8928963811669936,
            "definition": {
              "title": "Latency Distribution (hits)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "type": "distribution",
              "xaxis": {
                "max": "auto",
                "scale": "linear",
                "min": "auto",
                "include_zero": true
              },
              "yaxis": {
                "max": "auto",
                "scale": "linear",
                "min": "auto",
                "include_zero": true
              },
              "requests": [
                {
                  "query": {
                    "search": {
                      "query": "source:akamai.datastream @cacheStatus:1 $service"
                    },
                    "data_source": "logs",
                    "compute": { "metric": "@duration", "aggregation": "avg" },
                    "name": "query1",
                    "indexes": ["*"],
                    "group_by": []
                  },
                  "request_type": "histogram",
                  "style": { "palette": "green" }
                }
              ]
            },
            "layout": { "x": 2, "y": 3, "width": 4, "height": 2 }
          },
          {
            "id": 7799573143653402,
            "definition": {
              "title": "Latency Distribution (misses)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "type": "distribution",
              "xaxis": {
                "max": "auto",
                "scale": "linear",
                "min": "auto",
                "include_zero": true
              },
              "yaxis": {
                "max": "auto",
                "scale": "linear",
                "min": "auto",
                "include_zero": true
              },
              "requests": [
                {
                  "query": {
                    "search": {
                      "query": "source:akamai.datastream @cacheStatus:0 $service"
                    },
                    "data_source": "logs",
                    "compute": { "metric": "@duration", "aggregation": "avg" },
                    "name": "query1",
                    "indexes": ["*"],
                    "group_by": []
                  },
                  "request_type": "histogram",
                  "style": { "palette": "red" }
                }
              ]
            },
            "layout": { "x": 2, "y": 5, "width": 4, "height": 2 }
          },
          {
            "id": 5911075775334430,
            "definition": {
              "title": "Total Request Latency (hits and misses)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    { "alias": "Pass Processing Time", "formula": "query1" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @cacheStatus:1"
                      },
                      "data_source": "logs",
                      "compute": {
                        "metric": "@duration",
                        "aggregation": "avg"
                      },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ],
                  "style": {
                    "palette": "green",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                },
                {
                  "formulas": [
                    { "alias": "Miss Processing Time", "formula": "query1" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "search": {
                        "query": "source:akamai.datastream $service @cacheStatus:0"
                      },
                      "data_source": "logs",
                      "compute": {
                        "metric": "@duration",
                        "aggregation": "avg"
                      },
                      "name": "query1",
                      "indexes": ["*"],
                      "group_by": []
                    }
                  ],
                  "style": {
                    "palette": "red",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 0, "y": 7, "width": 6, "height": 3 }
          }
        ]
      },
      "layout": { "x": 6, "y": 11, "width": 6, "height": 11 }
    }
  ],
  "template_variables": [
    {
      "name": "service",
      "default": "*",
      "prefix": "service",
      "available_values": []
    }
  ],
  "layout_type": "ordered",
  "is_read_only": false,
  "notify_list": [],
  "reflow_type": "fixed",
  "id": "3uk-dxb-qk8"
}
