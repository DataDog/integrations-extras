{
  "title": "Fauna Overview",
  "description": "This dashboard provides a high-level overview of your Fauna queries allowing you to track\n* The number of failed and successful queries\n* Query latency\n* Fauna cost metrics generated by your queries",
  "widgets": [
    {
      "id": 325090501093728,
      "definition": {
        "title": "About Fauna",
        "banner_img": "https://raw.githubusercontent.com/DataDog/integrations-extras/8ac03f754a6da759402a208201c0507c6f3fb761/fauna/assets/logos/Fauna-logo-color.svg",
        "show_title": false,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 6544225029855812,
            "definition": {
              "type": "note",
              "content": "This dashboard provides a high-level overview of your Fauna queries allowing you to track\n* The number of failed and successful queries\n* Query latency\n* Fauna cost metrics generated by your queries",
              "background_color": "white",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 7032118608350450,
            "definition": {
              "type": "note",
              "content": "Further reading on Fauna Integration:\n* [Fauna Datadog Integration Docs](https://docs.fauna.com/fauna/current/integration/datadog)\n* [Query Log Format](https://docs.fauna.com/fauna/current/tools/query_log/reference/log_reference)\n* [Fauna Billing Metrics Reference](https://docs.fauna.com/fauna/current/plan_billing/billing#metering-details-summary)",
              "background_color": "white",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 8,
        "height": 5
      }
    },
    {
      "id": 1741971994096136,
      "definition": {
        "title": "Overview",
        "background_color": "white",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 3082392200196274,
            "definition": {
              "title": "Failed Queries",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "default_zero(a)"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "count"
                      },
                      "group_by": [],
                      "search": {
                        "query": "@http.status_code:>=400 source:fauna"
                      },
                      "storage": "hot"
                    }
                  ],
                  "response_format": "scalar"
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "bars",
                "yaxis": {}
              }
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 2778462063252226,
            "definition": {
              "title": "Total Queries",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "default_zero(a)"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "count"
                      },
                      "group_by": [],
                      "search": {
                        "query": "source:fauna"
                      },
                      "storage": "hot"
                    }
                  ],
                  "response_format": "scalar"
                }
              ],
              "autoscale": true,
              "precision": 2,
              "timeseries_background": {
                "type": "bars",
                "yaxis": {}
              }
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 8,
        "y": 0,
        "width": 4,
        "height": 5
      }
    },
    {
      "id": 3955370034957714,
      "definition": {
        "title": "Query Responses",
        "background_color": "vivid_green",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 1216998771374998,
            "definition": {
              "title": "Failed Queries",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Client Failures",
                      "formula": "default_zero(a)"
                    },
                    {
                      "alias": "Server Failures",
                      "formula": "default_zero(query1)"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "count"
                      },
                      "group_by": [],
                      "search": {
                        "query": "@http.status_code:(>=400 <500) source:fauna"
                      },
                      "storage": "hot"
                    },
                    {
                      "data_source": "logs",
                      "name": "query1",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "count"
                      },
                      "group_by": [],
                      "search": {
                        "query": "@http.status_code:>=500 source:fauna"
                      },
                      "storage": "hot"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic"
                  },
                  "display_type": "bars"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 2499763454386204,
            "definition": {
              "type": "note",
              "content": "The number of failed Fauna Queries. Client Failures indicate a 4xx response while Server Failures indicate a 5xx response.\n",
              "background_color": "green",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 4985925877129530,
            "definition": {
              "title": "Successful Queries",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Successful Queries",
                      "formula": "default_zero(a)"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "count"
                      },
                      "group_by": [],
                      "search": {
                        "query": "@http.status_code:(>=200 <300) source:fauna"
                      },
                      "storage": "hot"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic"
                  },
                  "display_type": "bars"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 2324312996293238,
            "definition": {
              "type": "note",
              "content": "The number of successful Fauna Queries. All Queries shown here had a 2xx response code.\n",
              "background_color": "green",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 6,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 8025182441063456,
            "definition": {
              "title": "Total Queries",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Total Queries",
                      "formula": "default_zero(a)"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "count"
                      },
                      "group_by": [],
                      "search": {
                        "query": "source:fauna"
                      },
                      "storage": "hot"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic"
                  },
                  "display_type": "bars"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 8,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 4698654642100834,
            "definition": {
              "type": "note",
              "content": "The total number of Fauna Queries. This includes all response codes.",
              "background_color": "green",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 10,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 4,
        "height": 13
      }
    },
    {
      "id": 274546046144418,
      "definition": {
        "title": "Query Performance",
        "background_color": "vivid_blue",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 2655644955911730,
            "definition": {
              "title": "Query Time",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "P95 Query Time",
                      "formula": "a"
                    },
                    {
                      "alias": "P50 Query Time",
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "pc95",
                        "metric": "@fauna.QUERY_TIME_MS"
                      },
                      "group_by": [],
                      "search": {
                        "query": "source:fauna"
                      },
                      "storage": "hot"
                    },
                    {
                      "data_source": "logs",
                      "name": "query1",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "median",
                        "metric": "@fauna.QUERY_TIME_MS"
                      },
                      "group_by": [],
                      "search": {
                        "query": "source:fauna"
                      },
                      "storage": "hot"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 7695344205629036,
            "definition": {
              "title": "Transaction Retries",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Transaction Retries",
                      "formula": "a"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "sum",
                        "metric": "@fauna.TXN_RETRIES"
                      },
                      "group_by": [],
                      "search": {
                        "query": "source:fauna"
                      },
                      "storage": "hot"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic"
                  },
                  "display_type": "bars"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 7058841308037794,
            "definition": {
              "type": "note",
              "content": "The number of transaction retries among Fauna queries. A value greater than 0 indicates there is query contention. This means that more than 1 query is writing to the same document, causing some transactions to retry in order to run with up to date data.",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 4,
        "y": 0,
        "width": 4,
        "height": 7
      }
    },
    {
      "id": 2890651219020396,
      "definition": {
        "title": "Query Cost Metrics",
        "background_color": "vivid_purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 8734954746295370,
            "definition": {
              "title": "Byte Read Ops",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Byte Read Ops",
                      "formula": "a"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "sum",
                        "metric": "@fauna.BYTE_READ_OPS",
                        "interval": 60000
                      },
                      "group_by": [],
                      "search": {
                        "query": "source:fauna"
                      },
                      "storage": "hot"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic"
                  },
                  "display_type": "bars"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 6641933816621904,
            "definition": {
              "type": "note",
              "content": "Sum of Byte Read Ops across all queries over the 1 minute interval.",
              "background_color": "purple",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 6849502169400879,
            "definition": {
              "title": "Byte Write Ops",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Byte Write Ops",
                      "formula": "default_zero(a)"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "sum",
                        "metric": "@fauna.BYTE_WRITE_OPS",
                        "interval": 60000
                      },
                      "group_by": [],
                      "search": {
                        "query": "source:fauna"
                      },
                      "storage": "hot"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic"
                  },
                  "display_type": "bars"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 878408836720968,
            "definition": {
              "type": "note",
              "content": "Sum of Byte Write Ops across all queries over the 1 minute interval.",
              "background_color": "purple",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 6,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 8670075899608014,
            "definition": {
              "title": "Compute Ops",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Compute Ops",
                      "formula": "a"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "sum",
                        "metric": "@fauna.COMPUTE_OPS",
                        "interval": 60000
                      },
                      "group_by": [],
                      "search": {
                        "query": "source:fauna"
                      },
                      "storage": "hot"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic"
                  },
                  "display_type": "bars"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 8,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 6726897843143884,
            "definition": {
              "type": "note",
              "content": "Sum of Compute Ops across all queries over the 1 minute interval.",
              "background_color": "purple",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 10,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 8,
        "y": 0,
        "width": 4,
        "height": 13
      }
    },
    {
      "id": 4734970219146390,
      "definition": {
        "title": "Logs",
        "background_color": "gray",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 1614092800462156,
            "definition": {
              "title": "Failed Query Logs",
              "title_size": "16",
              "title_align": "left",
              "requests": [
                {
                  "response_format": "event_list",
                  "query": {
                    "data_source": "logs_stream",
                    "query_string": "source:fauna @http.status_code:>=400 ",
                    "indexes": [],
                    "storage": "hot"
                  },
                  "columns": [
                    {
                      "field": "status_line",
                      "width": "auto"
                    },
                    {
                      "field": "timestamp",
                      "width": "auto"
                    },
                    {
                      "field": "content",
                      "width": "auto"
                    }
                  ]
                }
              ],
              "type": "list_stream"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 3
            }
          },
          {
            "id": 7563581578048690,
            "definition": {
              "title": "All Query Logs",
              "title_size": "16",
              "title_align": "left",
              "requests": [
                {
                  "response_format": "event_list",
                  "query": {
                    "data_source": "logs_stream",
                    "query_string": "source:fauna ",
                    "indexes": [],
                    "storage": "hot",
                    "sort": {
                      "column": "service",
                      "order": "desc"
                    }
                  },
                  "columns": [
                    {
                      "field": "status_line",
                      "width": "auto"
                    },
                    {
                      "field": "timestamp",
                      "width": "auto"
                    },
                    {
                      "field": "content",
                      "width": "auto"
                    }
                  ]
                }
              ],
              "type": "list_stream"
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 12,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 18,
        "width": 12,
        "height": 7
      }
    }
  ],
  "template_variables": [],
  "layout_type": "ordered",
  "notify_list": [],
  "reflow_type": "fixed"
}
